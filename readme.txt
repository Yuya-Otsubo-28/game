# 第02回レポート

名前：大坪雄也 \
学籍番号: 21TI019 \
提出日：2024/08/01

0. 準備の説明

[ファイルの説明]
<rootディレクトリ>
- src/: ソースファイルが含まれているディレクトリ. コンパイル時には生成されたオブジェクトファイルもここにできる.
- include/: ヘッダーファイルが含まれているディレクトリ.
- Makefile: ゲームプログラムの生成、削除を行うMakefile.
- readme.txt: このファイル.
- .gitignore: gitignoreファイル.

＜srcディレクトリ＞
- `main.cpp`: main関数と初期化などが書かれたファイル.
- `display.cpp`: windowへの描画についての処理が書かれたファイル. 
- `keyboard.cpp`: keyが入力された時のイベントの処理が書かれたファイル.
- `lightInit.cpp`: 光源の初期設定が書かれたファイル. 
- `map.cpp`: mapの描画について書かれたファイル.
- `reshape.cpp`: windowサイズ変更の際の処理が書かれたファイル.
- `timer.cpp`: 一定時間ごとに呼び出される処理が書かれたファイル.

＜includeディレクトリ＞
- game.h: マクロや構造体、プロトタイプ宣言が書かれたファイル.
- g_var.h: グローバル変数が書かれたファイル.

[実行プログラムの説明]
- game: コンパイルすると出来上がる実行ファイル. 

[コンパイル及び実行方法]

＜コンパイル方法＞
ターミナル上で実行する。
GLUTがインストールされていない場合は、aptなどのパッケージマネージャでインストールしておく。
コンパイルはMakefileを通して行う.
（Makefileのルール）
- `all`: （実行ファイルが存在しないか、ソースファイルへの変更があれば）実行ファイルの生成を行う.
- `run`: （実行ファイルが存在しないか、ソースファイルへの変更があれば）実行ファイルを生成し、実行する.
- `clean`: オブジェクトファイルのみ削除する.
- `fclean`: オブジェクトファイルと実行ファイルを削除する.
- `re`: `fclean`を行った後に, `all`を行う.

＜実行方法＞
`Make run`とターミナルにて入力することで実行できる.
終了する場合は, ターミナル上でCtrl+Cもしくはwindowの右上のxボタンをクリック.

1. ゲームのルール
	ヤカン型の戦車を操縦して敵の戦車を倒していくゲーム.
	全ての敵を倒すとゲームクリア.
	敵もプレイヤーも相手の砲弾が一度でも自分にあたったら倒される.
	青い場所は安全地帯となっており, 自分の砲弾を通さない代わりに敵の砲弾も防いでくれる.

2. 操作方法
	キーボードでの操作のみを対象としている. 
	- w, d: それぞれが前方, 後方への移動になっている.
	- a, s: それぞれが左, 右への方向転換になっている.
	- space: 砲弾の発射. 長押しして打ち続けることもできる.

3. 工夫点・アピールポイント
	- sampleプログラムを複数組み合わせた.
		> 特に苦戦したのは, 元としたsample02では戦車などの位置をfloatとして管理していたが, 
		> mapを導入するにあたって, 10×10の整数二重配列上の位置とfloatの位置とをうまくかみ合わせることだった. 
		> 例えば, 砲弾が壁にあたったら消えるようにするなどの当たり判定の部分でfloatの位置情報を適切に割って, 絶対値を取ることで整数二重配列と対応させた.
	
	- 画面上の文字表示を適切に切り替えられるようにした.
		> 敵を数体倒したのちに, 敵にプレイヤーが倒されてしまった場合などに画面の文字表記がかぶってしまうことがあったが, 
		> 条件文を適切に修正することでそれを防いだ. 
	
	- 適切な難易度調整
		> 簡単すぎず, 難しすぎず, 少し難しいくらいの難易度に調整した. 
		> 敵の数や壁の配置, 敵の回転の挙動などを細かく変更して試遊することで調整していった. 
	
	- ファイルの切り分け
		> sampleプログラムでは, 一つのファイル内に全ての処理やマクロや大域変数が書かれていて読みずらかったので, 
		> 課題を取り組むにあたって, まず初めに機能ごとに複数ファイルに切り分けることを行った. 
		> 個人的には可読性が大きく向上したので今後も行っていきたいと感じた. 

4. 動作環境
	WSL上の Ubuntu 20.04 on Windows で動作確認は行った. 
	GLUTがインストールされていれば, Linux系のOSで動作するはずである.
